<mxfile host="app.diagrams.net" modified="2024-01-01T00:00:00.000Z" agent="5.0" version="22.1.0" etag="drawio" type="device">
  <diagram name="Port-Forward Network Flow" id="portforward-flow">
    <mxGraphModel dx="1434" dy="844" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1400" pageHeight="900" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />

        <!-- Title -->
        <mxCell id="title" value="Port-Forward Network Flow - Access via localhost" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=22;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="350" y="20" width="700" height="40" as="geometry" />
        </mxCell>

        <!-- User -->
        <mxCell id="user" value="ðŸ‘¤&#xa;User Browser" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#cdeb8b;strokeColor=#36393d;fontSize=14;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="80" y="150" width="160" height="100" as="geometry" />
        </mxCell>

        <!-- Terminal/kubectl -->
        <mxCell id="terminal" value="Terminal&#xa;&#xa;kubectl port-forward commands:&#xa;&#xa;jenkins:&#xa;kubectl port-forward -n jenkins \&#xa;  svc/jenkins 8080:8080&#xa;&#xa;argocd:&#xa;kubectl port-forward -n argocd \&#xa;  svc/argocd-server 8443:443&#xa;&#xa;vault:&#xa;kubectl port-forward -n vault \&#xa;  svc/vault 8200:8200" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;fontSize=11;align=left;fontFamily=Courier New" vertex="1" parent="1">
          <mxGeometry x="80" y="300" width="260" height="240" as="geometry" />
        </mxCell>

        <!-- Connection: User to Terminal -->
        <mxCell id="conn-user-term" value="âš ï¸ Must keep terminal&#xa;running" style="endArrow=classic;html=1;rounded=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;strokeWidth=2;strokeColor=#CC6600;dashed=1" edge="1" parent="1" source="user" target="terminal">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="600" y="400" as="sourcePoint" />
            <mxPoint x="650" y="350" as="targetPoint" />
          </mxGeometry>
        </mxCell>

        <!-- Localhost Ports -->
        <mxCell id="localhost" value="localhost Ports&#xa;&#xa;:8080 â†’ Jenkins&#xa;:8443 â†’ Argo CD&#xa;:8200 â†’ Vault&#xa;&#xa;(Created by kubectl port-forward)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;fontSize=12;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="420" y="150" width="200" height="180" as="geometry" />
        </mxCell>

        <!-- Connection: Terminal to localhost -->
        <mxCell id="conn-term-local" value="Create port bindings" style="endArrow=classic;html=1;rounded=0;exitX=1;exitY=0.25;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;strokeWidth=2;strokeColor=#9900CC" edge="1" parent="1" source="terminal" target="localhost">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="600" y="400" as="sourcePoint" />
            <mxPoint x="650" y="350" as="targetPoint" />
          </mxGeometry>
        </mxCell>

        <!-- Connection: User to localhost -->
        <mxCell id="conn-user-local" value="2. HTTP Request&#xa;http://localhost:8080" style="endArrow=classic;html=1;rounded=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.25;entryDx=0;entryDy=0;strokeWidth=2;strokeColor=#0066CC" edge="1" parent="1" source="user" target="localhost">
          <mxGeometry x="0.1" width="50" height="50" relative="1" as="geometry">
            <mxPoint x="600" y="400" as="sourcePoint" />
            <mxPoint x="650" y="350" as="targetPoint" />
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>

        <!-- kubectl Proxy Layer -->
        <mxCell id="kubectl-proxy" value="kubectl port-forward proxy&#xa;&#xa;Tunnels traffic through:&#xa;â€¢ Kubernetes API Server&#xa;â€¢ Authentication&#xa;â€¢ Direct to Service/Pod" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;fontSize=12;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="700" y="150" width="240" height="180" as="geometry" />
        </mxCell>

        <!-- Connection: localhost to kubectl proxy -->
        <mxCell id="conn-local-proxy" value="3. Forward via&#xa;kubectl tunnel" style="endArrow=classic;html=1;rounded=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;strokeWidth=3;strokeColor=#CC0000" edge="1" parent="1" source="localhost" target="kubectl-proxy">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="600" y="400" as="sourcePoint" />
            <mxPoint x="650" y="350" as="targetPoint" />
          </mxGeometry>
        </mxCell>

        <!-- Services Layer -->
        <mxCell id="services-box" value="Services (ClusterIP)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;verticalAlign=top;fontSize=14;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="1020" y="120" width="300" height="230" as="geometry" />
        </mxCell>

        <!-- Jenkins Service -->
        <mxCell id="jenkins-svc" value="jenkins&#xa;Service&#xa;namespace: jenkins&#xa;port: 8080" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#b1ddf0;strokeColor=#10739e;fontSize=11" vertex="1" parent="1">
          <mxGeometry x="1060" y="160" width="100" height="170" as="geometry" />
        </mxCell>

        <!-- ArgoCD Service -->
        <mxCell id="argocd-svc" value="argocd-server&#xa;Service&#xa;namespace: argocd&#xa;port: 443" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fad9d5;strokeColor=#ae4132;fontSize=11" vertex="1" parent="1">
          <mxGeometry x="1180" y="160" width="60" height="170" as="geometry" />
        </mxCell>

        <!-- Vault Service -->
        <mxCell id="vault-svc" value="vault&#xa;Service&#xa;namespace: vault&#xa;port: 8200" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;fontSize=11" vertex="1" parent="1">
          <mxGeometry x="1250" y="160" width="60" height="170" as="geometry" />
        </mxCell>

        <!-- Connection: kubectl proxy to Services -->
        <mxCell id="conn-proxy-jenkins" value="4a. Direct to&#xa;jenkins svc" style="endArrow=classic;html=1;rounded=0;exitX=1;exitY=0.25;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;strokeWidth=2;strokeColor=#0066CC" edge="1" parent="1" source="kubectl-proxy" target="jenkins-svc">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="600" y="500" as="sourcePoint" />
            <mxPoint x="650" y="450" as="targetPoint" />
          </mxGeometry>
        </mxCell>

        <mxCell id="conn-proxy-argocd" value="4b" style="endArrow=classic;html=1;rounded=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;strokeWidth=2;strokeColor=#CC0000" edge="1" parent="1" source="kubectl-proxy" target="argocd-svc">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="600" y="500" as="sourcePoint" />
            <mxPoint x="650" y="450" as="targetPoint" />
          </mxGeometry>
        </mxCell>

        <mxCell id="conn-proxy-vault" value="4c" style="endArrow=classic;html=1;rounded=0;exitX=1;exitY=0.75;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;strokeWidth=2;strokeColor=#009900" edge="1" parent="1" source="kubectl-proxy" target="vault-svc">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="600" y="500" as="sourcePoint" />
            <mxPoint x="650" y="450" as="targetPoint" />
          </mxGeometry>
        </mxCell>

        <!-- Pods Layer -->
        <mxCell id="pods-box" value="Pods" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;verticalAlign=top;fontSize=14;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="1020" y="390" width="300" height="150" as="geometry" />
        </mxCell>

        <!-- Jenkins Pod -->
        <mxCell id="jenkins-pod" value="jenkins-xxx&#xa;Pod&#xa;Port: 8080" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#b1ddf0;strokeColor=#10739e;fontSize=11" vertex="1" parent="1">
          <mxGeometry x="1060" y="430" width="100" height="90" as="geometry" />
        </mxCell>

        <!-- ArgoCD Pod -->
        <mxCell id="argocd-pod" value="argocd-&#xa;server-xxx&#xa;Pod&#xa;Port: 8080" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fad9d5;strokeColor=#ae4132;fontSize=11" vertex="1" parent="1">
          <mxGeometry x="1180" y="430" width="60" height="90" as="geometry" />
        </mxCell>

        <!-- Vault Pod -->
        <mxCell id="vault-pod" value="vault-0&#xa;Pod&#xa;Port:&#xa;8200" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;fontSize=11" vertex="1" parent="1">
          <mxGeometry x="1250" y="430" width="60" height="90" as="geometry" />
        </mxCell>

        <!-- Connection: Service to Pods -->
        <mxCell id="conn-svc-pod-j" value="5a" style="endArrow=classic;html=1;rounded=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;strokeWidth=2;strokeColor=#0066CC" edge="1" parent="1" source="jenkins-svc" target="jenkins-pod">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="600" y="500" as="sourcePoint" />
            <mxPoint x="650" y="450" as="targetPoint" />
          </mxGeometry>
        </mxCell>

        <mxCell id="conn-svc-pod-a" value="5b" style="endArrow=classic;html=1;rounded=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;strokeWidth=2;strokeColor=#CC0000" edge="1" parent="1" source="argocd-svc" target="argocd-pod">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="600" y="500" as="sourcePoint" />
            <mxPoint x="650" y="450" as="targetPoint" />
          </mxGeometry>
        </mxCell>

        <mxCell id="conn-svc-pod-v" value="5c" style="endArrow=classic;html=1;rounded=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;strokeWidth=2;strokeColor=#009900" edge="1" parent="1" source="vault-svc" target="vault-pod">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="600" y="500" as="sourcePoint" />
            <mxPoint x="650" y="450" as="targetPoint" />
          </mxGeometry>
        </mxCell>

        <!-- Flow Description -->
        <mxCell id="flow-desc" value="Traffic Flow Steps:" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#666666;verticalAlign=top;fontSize=14;fontStyle=1;align=left" vertex="1" parent="1">
          <mxGeometry x="80" y="600" width="1240" height="200" as="geometry" />
        </mxCell>

        <mxCell id="step1" value="1ï¸âƒ£ Run kubectl port-forward command in terminal (must keep running!)" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=12" vertex="1" parent="1">
          <mxGeometry x="100" y="640" width="600" height="30" as="geometry" />
        </mxCell>

        <mxCell id="step2" value="2ï¸âƒ£ User types http://localhost:8080 in browser" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=12" vertex="1" parent="1">
          <mxGeometry x="100" y="680" width="500" height="30" as="geometry" />
        </mxCell>

        <mxCell id="step3" value="3ï¸âƒ£ kubectl creates secure tunnel from localhost:8080 â†’ Kubernetes API â†’ Service" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=12" vertex="1" parent="1">
          <mxGeometry x="100" y="720" width="700" height="30" as="geometry" />
        </mxCell>

        <mxCell id="step4" value="4ï¸âƒ£ kubectl forwards directly to the specified service (no routing needed)" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=12" vertex="1" parent="1">
          <mxGeometry x="100" y="760" width="600" height="30" as="geometry" />
        </mxCell>

        <mxCell id="step5" value="5ï¸âƒ£ Service forwards request to Pod (container port)" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=12" vertex="1" parent="1">
          <mxGeometry x="100" y="800" width="500" height="30" as="geometry" />
        </mxCell>

        <!-- Pros/Cons -->
        <mxCell id="pros" value="âœ… Advantages:" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;verticalAlign=top;fontSize=14;fontStyle=1;align=left" vertex="1" parent="1">
          <mxGeometry x="420" y="360" width="240" height="180" as="geometry" />
        </mxCell>

        <mxCell id="pro1" value="â€¢ Very simple - just one command" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=11" vertex="1" parent="1">
          <mxGeometry x="430" y="395" width="220" height="25" as="geometry" />
        </mxCell>

        <mxCell id="pro2" value="â€¢ No infrastructure setup needed" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=11" vertex="1" parent="1">
          <mxGeometry x="430" y="425" width="220" height="25" as="geometry" />
        </mxCell>

        <mxCell id="pro3" value="â€¢ No /etc/hosts modification" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=11" vertex="1" parent="1">
          <mxGeometry x="430" y="455" width="220" height="25" as="geometry" />
        </mxCell>

        <mxCell id="pro4" value="â€¢ Works immediately" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=11" vertex="1" parent="1">
          <mxGeometry x="430" y="485" width="220" height="25" as="geometry" />
        </mxCell>

        <mxCell id="pro5" value="â€¢ Best for daily development" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=11" vertex="1" parent="1">
          <mxGeometry x="430" y="515" width="220" height="25" as="geometry" />
        </mxCell>

        <mxCell id="cons" value="âŒ Disadvantages:" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;verticalAlign=top;fontSize=14;fontStyle=1;align=left" vertex="1" parent="1">
          <mxGeometry x="700" y="360" width="240" height="180" as="geometry" />
        </mxCell>

        <mxCell id="con1" value="â€¢ Must keep terminal running" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=11" vertex="1" parent="1">
          <mxGeometry x="710" y="395" width="220" height="25" as="geometry" />
        </mxCell>

        <mxCell id="con2" value="â€¢ Different from production setup" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=11" vertex="1" parent="1">
          <mxGeometry x="710" y="425" width="220" height="25" as="geometry" />
        </mxCell>

        <mxCell id="con3" value="â€¢ Ugly URLs (localhost:8080)" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=11" vertex="1" parent="1">
          <mxGeometry x="710" y="455" width="220" height="25" as="geometry" />
        </mxCell>

        <mxCell id="con4" value="â€¢ One terminal per service" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=11" vertex="1" parent="1">
          <mxGeometry x="710" y="485" width="220" height="25" as="geometry" />
        </mxCell>

        <mxCell id="con5" value="â€¢ Doesn't teach production patterns" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=11" vertex="1" parent="1">
          <mxGeometry x="710" y="515" width="220" height="25" as="geometry" />
        </mxCell>

      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
